# No.1--SQL Injection


## 数据库类型

Oracle数据库

DB2数据库

SQL Server数据库

PostgreSQL数据库

MySQL数据库

Sybase数据库


## SQL注入类型

a.从注入方式上看有：联合查询注入、报错型注入、布尔型注入、延时注入、堆叠注入等；

b.从数据类型上有：字符型、数字型；

c.从注入位置可以分为GET型、POST型、HTTP头部、cookie数据等


## 宽字节注入原理

在数据库设置`mysql_set_charset("gbk")`

即：使用GBK编码时，输入字符的ASCII码大于128（到达汉字的范围）时，会将这个字符以及后面的一个字符当做一个汉字去识别。在转义 `'` 时，通常是将其转换为 `\'`，url编码后为`%5c%27`，我们如果要绕过，就得把 `\` 过滤掉。

常用的方法就是在`%5c%27`之前加上`%df`，由于`%df`的ASCII码为223，数据库会将`%df%5c`当成一个汉字“`連`”，`%27`则成功逃逸。（其中，`%df`可以换成ASCII码大于128的字符）。

特殊情况中，`iconv()` 函数解析错误会导致在编码转换时`\`被吃掉。

【mysql在使用GBK编码时，会认为两个字符是一个汉字（前一个ASCII码要大于128，才到汉字的范围）。】

PHP的魔术引号(magic_quotes_gpc)开启，会在特殊字符（比如`'`,`"`,`\`,`null`）前面加`\`，导致闭合失败。
